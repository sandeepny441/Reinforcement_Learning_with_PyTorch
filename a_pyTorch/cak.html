<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Yearly Calendar Schedule</title>
    <style>
        /* CSS Styles */
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        #calendar {
            display: flex;
            flex-wrap: wrap;
            max-width: 700px;
        }

        .date {
            width: 14.28%;
            border: 1px solid #ccc;
            box-sizing: border-box;
            text-align: center;
            cursor: pointer;
            padding: 10px;
        }

        .date:hover {
            background-color: #f0f0f0;
        }

        #schedule {
            margin-top: 20px;
        }

        #daily-schedule {
            width: 100%;
            border-collapse: collapse;
        }

        #daily-schedule th, #daily-schedule td {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: center;
        }

        #selected-date {
            margin-bottom: 10px;
        }

        input[type="text"] {
            width: 100%;
            box-sizing: border-box;
        }
    </style>
</head>
<body>
    <h1>Yearly Calendar Schedule</h1>
    <div id="calendar"></div>
    <div id="schedule" style="display:none;">
        <h2 id="selected-date"></h2>
        <table id="daily-schedule">
            <thead>
                <tr>
                    <th>Hour</th>
                    <th>What to Do</th>
                    <th>Status</th>
                    <th>Column 3</th>
                    <th>Column 4</th>
                </tr>
            </thead>
            <tbody>
                <!-- Schedule rows will be inserted here -->
            </tbody>
        </table>
    </div>

    <script>
        // JavaScript Code
        const calendarEl = document.getElementById('calendar');
        const scheduleEl = document.getElementById('schedule');
        const selectedDateEl = document.getElementById('selected-date');
        const dailyScheduleEl = document.getElementById('daily-schedule').getElementsByTagName('tbody')[0];

        const currentYear = new Date().getFullYear();

        // Data storage
        let schedules = {};

        // Load schedules from localStorage
        window.onload = function() {
            const savedSchedules = localStorage.getItem('schedules');
            if (savedSchedules) {
                schedules = JSON.parse(savedSchedules);
            }
        };

        // Generate the calendar
        function generateCalendar(year) {
            const date = new Date(year, 0, 1); // January 1st
            while (date.getFullYear() === year) {
                const dateEl = document.createElement('div');
                dateEl.className = 'date';
                dateEl.textContent = date.getDate() + '/' + (date.getMonth() + 1);
                dateEl.dataset.date = date.toISOString().split('T')[0]; // Format: YYYY-MM-DD

                dateEl.addEventListener('click', () => {
                    showSchedule(dateEl.dataset.date);
                });

                calendarEl.appendChild(dateEl);
                date.setDate(date.getDate() + 1);
            }
        }

        generateCalendar(currentYear);

        // Show schedule for selected date
        function showSchedule(date) {
            selectedDateEl.textContent = 'Schedule for ' + date;
            scheduleEl.style.display = 'block';

            // Clear previous schedule
            dailyScheduleEl.innerHTML = '';

            // Load schedule data if exists
            const daySchedule = schedules[date] || [];

            for (let hour = 0; hour < 24; hour++) {
                const row = dailyScheduleEl.insertRow();
                const hourCell = row.insertCell(0);
                const todoCell = row.insertCell(1);
                const statusCell = row.insertCell(2);
                const col3Cell = row.insertCell(3);
                const col4Cell = row.insertCell(4);

                hourCell.textContent = `${hour}:00`;

                // Load existing data or leave empty
                const scheduleItem = daySchedule.find(item => item.hour === hour) || {};

                // Create input elements
                const todoInput = document.createElement('input');
                todoInput.type = 'text';
                todoInput.value = scheduleItem.todo || '';
                todoInput.addEventListener('change', () => saveSchedule(date, hour, 'todo', todoInput.value));

                const statusInput = document.createElement('input');
                statusInput.type = 'text';
                statusInput.value = scheduleItem.status || '';
                statusInput.addEventListener('change', () => saveSchedule(date, hour, 'status', statusInput.value));

                const col3Input = document.createElement('input');
                col3Input.type = 'text';
                col3Input.value = scheduleItem.col3 || '';
                col3Input.addEventListener('change', () => saveSchedule(date, hour, 'col3', col3Input.value));

                const col4Input = document.createElement('input');
                col4Input.type = 'text';
                col4Input.value = scheduleItem.col4 || '';
                col4Input.addEventListener('change', () => saveSchedule(date, hour, 'col4', col4Input.value));

                todoCell.appendChild(todoInput);
                statusCell.appendChild(statusInput);
                col3Cell.appendChild(col3Input);
                col4Cell.appendChild(col4Input);
            }
        }

        // Save schedule data
        function saveSchedule(date, hour, field, value) {
            if (!schedules[date]) {
                schedules[date] = [];
            }

            let scheduleItem = schedules[date].find(item => item.hour === hour);

            if (!scheduleItem) {
                scheduleItem = { hour };
                schedules[date].push(scheduleItem);
            }

            scheduleItem[field] = value;

            // Save to localStorage
            localStorage.setItem('schedules', JSON.stringify(schedules));
        }
    </script>
</body>
</html>
